{"version":3,"sources":["webpack://FormulaValue/webpack/universalModuleDefinition","webpack://FormulaValue/webpack/bootstrap","webpack://FormulaValue/./src/Helpers.js","webpack://FormulaValue/./src/Variable.js","webpack://FormulaValue/./src/CompiledExpression.js","webpack://FormulaValue/external \"underscore\"","webpack://FormulaValue/./src/DefaultValue.js","webpack://FormulaValue/./src/ConcatenatedText.js","webpack://FormulaValue/external \"moment\"","webpack://FormulaValue/./src/Formula.js","webpack://FormulaValue/./src/FormulaValue.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__6__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_underscore","_moment","getPath","context","toProcess","split","processed","length","element","shift","replace","completeField","field","arrayValue","push","Number","assignTo","variable","path","index","pathRoute","pathElement","nextPathElement","compact","_","getDateTimeFormat","date","validateOperation","date1format","date2format","unit","evalWithSafeEnvironment","__availableSpecs","Y","M","W","D","h","years","months","weeks","days","hours","minutes","seconds","__defaultSpec","__processStarOperator","array","result","isArray","len","forEach","nestedElement","eval","error","console","warn","dateDiff","date1","date2","spec","_moment2","default","diff","sum","total","extract","text","separator","extractedValue","isNaN","flatten","shallow","groupConcat","join","concat","Array","slice","arguments","count","avg","formula","data","metaData","patterns","dataVarName","metaDataVarName","variableRegex","Variable","_classCallCheck","this","_hasContext","_hasStar","_hasAt","tempPath","Helpers","tempPathElement","_path","indexOf","_environment","_parsedVariable","parsedVariable","contextPath","_parseWithEnvironment","contextLength","pathLength","fieldPath","isNumber","Error","hasStarOperator","test","CompiledExpression","rules","expression","_this","_variables","variablesCache","size","rule","RegExp","pattern","replacement","_parsedExpression","match","variableText","isValid","_CompiledExpression2","DefaultValue","_possibleConstructorReturn","__proto__","getPrototypeOf","variableRegexp","ConcatenatedText","undefined","parsedVariables","map","hasStar","parseVariable","number","parseInt","Formula","resolvedParsedExpression","FormulaValue","isFormula","compiledExpression","isConcatenatedText"],"mappings":"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","file":"FormulaValue.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"underscore\"), require(\"moment\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"underscore\", \"moment\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FormulaValue\"] = factory(require(\"underscore\"), require(\"moment\"));\n\telse\n\t\troot[\"FormulaValue\"] = factory(root[\"underscore\"], root[\"moment\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__6__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","import _ from 'underscore';\nimport moment from 'moment';\n\nlet getPath = (context) => {\n\tif (!context) {\n\t\treturn [];\n\t}\n\tvar toProcess = context.split(/\\.|::/);\n\tvar path;\n\tvar processed = [];\n\n\t// Use of .shift() was preferred over other iteration methods for performance reasons.\n\t// check this test: https://jsperf.com/shift-vs-traditional-loop\n\n\twhile(toProcess.length > 0) {\n\t\tvar element = toProcess.shift();\n\t\telement = element.replace(/(.*)\\[(@|\\*|\\d+)]/g, function(completeField, field, arrayValue) {\n\t\t\tprocessed.push(field);\n\t\t\tif (arrayValue !== '@' && arrayValue !== '*') {\n\t\t\t\tarrayValue = Number(arrayValue);\n\t\t\t}\n\t\t\tprocessed.push(arrayValue);\n\t\t\treturn '';\n\t\t});\n\t\tif (element) {\n\t\t\tprocessed.push(element);\n\t\t}\n\t}\n\treturn processed;\n};\n\nlet assignTo = (variable, path, index, value) => {\n\tvar pathRoute = getPath(path);\n\tif ('undefined' !== typeof index) {\n\t\tpathRoute.push(index);\n\t}\n\twhile (pathRoute.length) {\n\t\tvar pathElement = pathRoute.shift();\n\t\tif (pathRoute.length > 0) {\n\t\t\tif (!variable[pathElement]) {\n\t\t\t\tvar nextPathElement = pathRoute[0];\n\t\t\t\tif ('number' === typeof nextPathElement) {\n\t\t\t\t\tvariable[pathElement] = [];\n\t\t\t\t} else {\n\t\t\t\t\tvariable[pathElement] = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tvariable = variable[pathElement];\n\t\t} else {\n\t\t\tvariable[pathElement] = value;\n\t\t}\n\t}\n};\n\nlet compact = (variable, path) => {\n\tvar pathRoute = getPath(path);\n\twhile (pathRoute.length) {\n\t\tvar pathElement = pathRoute.shift();\n\t\tif (pathRoute.length > 0) {\n\t\t\tif (!variable[pathElement]) {\n\t\t\t\tvar nextPathElement = pathRoute[0];\n\t\t\t\tif ('number' === typeof nextPathElement) {\n\t\t\t\t\tvariable[pathElement] = [];\n\t\t\t\t} else {\n\t\t\t\t\tvariable[pathElement] = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tvariable = variable[pathElement];\n\t\t} else {\n\t\t\tvariable[pathElement] = _.compact(variable[pathElement]);\n\t\t}\n\t}\n};\n\nlet getDateTimeFormat = function(date) {\n\tif (!date || typeof date !== 'string') {\n\t\treturn '';\n\t}\n\tswitch (date.length) {\n\t\tcase 10:\n\t\t\treturn 'YYYY-MM-DD';\n\t\tcase 19:\n\t\t\treturn 'YYYY-MM-DD HH:mm:ss';\n\t\tcase 8:\n\t\t\treturn 'HH:mm:ss';\n\t\tdefault:\n\t\t\treturn '';\n\t}\n};\n\nlet validateOperation = function(date1format, date2format, unit) {\n\tswitch (unit) {\n\t\tcase 'years':\n\t\tcase 'months':\n\t\tcase 'weeks':\n\t\tcase 'days':\n\t\t\tif (date1format === 'HH:mm:ss' || date2format === 'HH:mm:ss') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'hours':\n\t\tcase 'minutes':\n\t\tcase 'seconds':\n\t\t\tif ((date1format === 'HH:mm:ss' || date2format === 'HH:mm:ss') && date1format !== date2format) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\treturn true;\n};\n\nlet evalWithSafeEnvironment = (function () {\n\n\tvar __availableSpecs = {\n\t\tY: 'years',\n\t\tM: 'months',\n\t\tW: 'weeks',\n\t\tD: 'days',\n\t\th: 'hours',\n\t\tm: 'minutes',\n\t\ts: 'seconds',\n\t\tyears: 'years',\n\t\tmonths: 'months',\n\t\tweeks: 'weeks',\n\t\tdays: 'days',\n\t\thours: 'hours',\n\t\tminutes: 'minutes',\n\t\tseconds: 'seconds'\n\t};\n\tvar __defaultSpec = 'seconds';\n\n\tvar __processStarOperator = function(array, path) {\n\t\tvar result = [];\n\t\tif (array && _.isArray(array) && array.length) {\n\t\t\tfor (var i = 0, len = array.length; i < len; i++) {\n\t\t\t\tvar value;\n\t\t\t\tif (_.isArray(array[i])) {\n\t\t\t\t\tvalue = [];\n\t\t\t\t\tarray[i].forEach(function(nestedElement) {\n\t\t\t\t\t\tvalue.push(eval('nestedElement' + path));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tvalue = null;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvalue = eval('array[i]' + path);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.warn(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresult.push(value);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\n\tfunction dateDiff(date1, date2, spec) {\n\t\tlet date1format = getDateTimeFormat(date1),\n\t\t\tdate2format = getDateTimeFormat(date2);\n\t\tspec = __availableSpecs[spec] || __defaultSpec;\n\t\tif (validateOperation(date1format, date2format, spec)) {\n\t\t\tdate1 = moment(date1, date1format);\n\t\t\tdate2 = moment(date2, date2format);\n\t\t\treturn date1.diff(date2, spec);\n\t\t} else {\n\t\t\tconsole.warn('Invalid inputs at dateDiff.');\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction sum(array) {\n\t\tvar total = 0;\n\t\tif (array && _.isArray(array) && array.length) {\n\t\t\tfor (var i = 0, len = array.length; i < len; i++) {\n\t\t\t\tif (array[i]) {\n\t\t\t\t\ttotal += array[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn total;\n\t}\n\n\tfunction extract(text, separator, index) {\n\t\ttext = 'string' === typeof text ? text : (text || '');\n\t\tseparator = separator || ',';\n\t\tindex = index || 0;\n\n\t\tvar extractedValue = text.split(separator)[index],\n\t\t\tresult = isNaN(extractedValue) ? extractedValue : Number(extractedValue);\n\n\t\treturn result;\n\t}\n\n\tfunction flatten(array, shallow) {\n\t\treturn _.flatten(array, shallow);\n\t}\n\n\tfunction groupConcat(array, separator) {\n\t\tseparator = typeof separator === 'undefined' ? ', ' : separator;\n\t\treturn array.join(separator);\n\t}\n\n\tfunction concat() {\n\t\tvar elements = Array.prototype.slice.call(arguments);\n\t\treturn elements.join('');\n\t}\n\n\tfunction count(array) {\n\t\treturn array.length;\n\t}\n\n\tfunction avg(array) {\n\t\tvar total = sum(array);\n\t\tif (array && _.isArray(array) && array.length>0) {\n\t\t\ttotal = total / array.length;\n\t\t}\n\t\treturn total;\n\t}\n\n\treturn function(formula, data, metaData) {\n\t\treturn eval(formula);\n\t};\n}).call();\n\nexport default {\n\n\tgetPath: getPath,\n\tassignTo: assignTo,\n\tcompact: compact,\n\tpatterns: {\n\t\tvariable: '{{([^}]+)}}'\n\t},\n\tdataVarName: 'data',\n\tmetaDataVarName: 'metaData',\n\tevalWithSafeEnvironment: evalWithSafeEnvironment\n\n};\n","import _ from 'underscore';\nimport Helpers from './Helpers';\n\nconst variableRegex = /\\[(?!(?:@|\\*|\\d+)\\]|[\\.$])|^[^\\[]*\\]|\\][^\\[]*\\]|[\\{\\}]|\\][]|\\][^\\.\\[]/;\n\nexport default class Variable {\n\n\tconstructor(text) {\n\n\t\tthis._hasContext = false;\n\t\tthis._hasStar = false;\n\t\tthis._hasAt = false;\n\n\t\tlet tempPath = Helpers.getPath(text);\n\n\t\tlet tempPathElement;\n\t\tfor (let i = tempPath.length - 1; i >= 0; i--) {\n\t\t\ttempPathElement = tempPath[i];\n\t\t\tif (tempPathElement !== '@' && tempPathElement !== '*') {\n\t\t\t\ttempPath[i] = tempPathElement;\n\t\t\t} else {\n\t\t\t\tthis._hasContext = true;\n\t\t\t\tif (tempPathElement === '*') {\n\t\t\t\t\tthis._hasStar = true;\n\t\t\t\t} else if (tempPathElement === '@') {\n\t\t\t\t\tthis._hasAt = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._path = tempPath;\n\n\t\tif (text.indexOf('::') > -1) {\n\t\t\tthis._environment = Helpers.metaDataVarName;\n\t\t} else {\n\t\t\tthis._environment = Helpers.dataVarName;\n\t\t}\n\n\t\tif (text === '') {\n\t\t\tthis._parsedVariable = 'null';\n\t\t} else if (!this._hasContext) {\n\t\t\tlet parsedVariable = this._environment;\n\t\t\tfor (var i = 0, len = tempPath.length; i < len; i++) {\n\t\t\t\tparsedVariable += '[\\'' + tempPath[i] + '\\']';\n\t\t\t}\n\t\t\tthis._parsedVariable = parsedVariable;\n\t\t}\n\t}\n\n\tparseVariable(contextPath) {\n\t\treturn (this._parsedVariable || this._parseWithEnvironment(contextPath));\n\t}\n\n\t_parseWithEnvironment(contextPath) {\n\t\tlet index = 0,\n\t\t\tcontextLength = contextPath.length,\n\t\t\tpathLength = this._path.length,\n\t\t\tfieldPath = this._path;\n\n\t\tfor (; index<contextLength && index < pathLength; index++) {\n\t\t\tif (fieldPath[index] === '@' && _.isNumber(contextPath[index])) {\n\t\t\t\tfieldPath[index] = Number(contextPath[index]);\n\t\t\t} else if (fieldPath[index] !== contextPath[index] || fieldPath[index] === '*') {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor (; index < pathLength; index++) {\n\t\t\tif (fieldPath[index] === '@') {\n\t\t\t\tthrow new Error('Context could not fully resolve');\n\t\t\t} else if (fieldPath[index] === '*') {\n\t\t\t\tfieldPath[index] = '*';\n\t\t\t}\n\t\t}\n\n\t\tlet pathElement,\n\t\t\thasStarOperator = false,\n\t\t\tparsedVariable = this._environment;\n\t\tfor (var i = 0, len = this._path.length; i < len; i++) {\n\t\t\tpathElement = this._path[i];\n\t\t\tif (pathElement === '*') {\n\t\t\t\tif (hasStarOperator) {\n\t\t\t\t\tparsedVariable += '\")';\n\t\t\t\t} else {\n\t\t\t\t\thasStarOperator = true;\n\t\t\t\t}\n\t\t\t\tparsedVariable = '__processStarOperator(' + parsedVariable + ',\"';\n\t\t\t} else {\n\t\t\t\tparsedVariable += '[\\'' + pathElement + '\\']';\n\t\t\t}\n\t\t}\n\n\t\tif (hasStarOperator) {\n\t\t\tparsedVariable += '\")';\n\t\t}\n\t\treturn parsedVariable;\n\t}\n\n\thasStar() {\n\t\treturn this._hasStar;\n\t}\n\n\thasAt() {\n\t\treturn this._hasAt;\n\t}\n\n\tstatic isValid(text) {\n\t\treturn !variableRegex.test(text);\n\t}\n\n}\n","import Variable from './Variable';\nimport Helpers from './Helpers';\n\nexport default class CompiledExpression {\n\n\tconstructor(rules, expression) {\n\t\tthis._variables = [];\n\n\t\tconst variablesCache = {};\n\n\t\tfor(var i = 0, size = rules.length; i < size; i++) {\n\t\t\tvar rule = rules[i];\n\t\t\texpression = expression.replace(new RegExp(rule.pattern, 'g'), rule.replacement);\n\t\t}\n\n\t\tthis._parsedExpression = expression.replace(new RegExp(Helpers.patterns.variable, 'g'), (match, variableText) => {\n\t\t\tif (Variable.isValid(variableText)) {\n\t\t\t\tif (!variablesCache[variableText]) {\n\t\t\t\t\tvariablesCache[variableText] = this._variables.length;\n\t\t\t\t\tthis._variables.push(new Variable(variableText));\n\t\t\t\t}\n\t\t\t\treturn '[*' + variablesCache[variableText] + '*]';\n\t\t\t} else {\n\t\t\t\treturn '{{' + variableText + '}}';\n\t\t\t}\n\t\t});\n\t}\n\n\teval() {\n\t\tthrow new Error('Eval is not implemented');\n\t}\n\n\tgetDependencies() {\n\t\tthrow new Error('GetDependencies is not implemented');\n\t}\n\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","import CompiledExpression from './CompiledExpression';\n\nexport default class DefaultValue extends CompiledExpression {\n\n\tconstructor(expression) {\n\t\tsuper([], '');\n\n\t\tthis.value = expression;\n\t}\n\n\teval() {\n\t\treturn this.value;\n\t}\n\n}\n","import Helpers from './Helpers';\nimport CompiledExpression from './CompiledExpression';\nimport Variable from './Variable';\n\nlet rules = [\n\t{\n\t\tpattern: '\\'',\n\t\treplacement: '\\\\\\''\n\t}\n];\n\nlet variableRegexp = new RegExp(Helpers.patterns.variable);\n\nexport default class ConcatenatedText extends CompiledExpression {\n\n\tconstructor(expression = '') {\n\t\tsuper(rules, expression);\n\t}\n\n\teval(data, metaData, context) {\n\t\tlet result = '';\n\t\ttry {\n\t\t\tvar contextPath = Helpers.getPath(context);\n\n\t\t\tvar parsedVariables = this._variables.map((variable) => {\n\t\t\t\tif (variable.hasStar()) {\n\t\t\t\t\treturn '';\n\t\t\t\t} else {\n\t\t\t\t\treturn Helpers.evalWithSafeEnvironment(variable.parseVariable(contextPath), data, metaData);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tresult = this._parsedExpression.replace(/\\[\\*(\\d*)\\*\\]/g, (match, number) => {\n\t\t\t\treturn parsedVariables[parseInt(number)];\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetDependencies() {\n\t\treturn this._variables.map((fieldPath) => fieldPath.split('::').shift());\n\t}\n\n\tstatic isConcatenatedText(expression) {\n\t\treturn 'string' === typeof expression && variableRegexp.test(expression) > -1;\n\t}\n\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","import CompiledExpression from './CompiledExpression';\nimport Variable from './Variable';\nimport Helpers from './Helpers';\n\nvar dataVarName = 'data',\n\tmetaDataVarName = 'metaData';\n\nvar rules = [\n\t{\n\t\tpattern: '^=',\n\t\treplacement: ''\n\t},\n\t{\n\t\tpattern: '\\'',\n\t\treplacement: '\\\\\\''\n\t}\n];\n\nexport default class Formula extends CompiledExpression {\n\n\tconstructor(expression) {\n\t\tsuper(rules, expression);\n\t}\n\n\tstatic isFormula(expression) {\n\t\treturn 'string' === typeof expression && expression.indexOf('=') === 0;\n\t}\n\n\teval(data, metaData, context) {\n\t\tlet result = null;\n\t\ttry {\n\t\t\tvar contextPath = Helpers.getPath(context);\n\t\t\tvar parsedVariables = this._variables.map((variable) => {\n\t\t\t\treturn variable.parseVariable(contextPath);\n\t\t\t});\n\t\t\tlet resolvedParsedExpression = this._parsedExpression.replace(/\\[\\*(\\d*)\\*\\]/g, (match, number) => {\n\t\t\t\treturn parsedVariables[parseInt(number)];\n\t\t\t});\n\t\t\tresult = Helpers.evalWithSafeEnvironment(resolvedParsedExpression, data, metaData);\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetDependencies() {\n\t\treturn this._variables.map((fieldPath) => fieldPath.split('::').shift());\n\t}\n\n}\n","import Formula from './Formula';\nimport ConcatenatedText from './ConcatenatedText';\nimport DefaultValue from './DefaultValue';\n\nexport default class FormulaValue {\n\n\tconstructor(expression = '') {\n\t\tif (Formula.isFormula(expression)) {\n\t\t\tthis.compiledExpression = new Formula(expression);\n\t\t} else if (ConcatenatedText.isConcatenatedText(expression)) {\n\t\t\tthis.compiledExpression = new ConcatenatedText(expression);\n\t\t} else {\n\t\t\tthis.compiledExpression = new DefaultValue(expression);\n\t\t}\n\t}\n\n\teval(data = {}, metaData = {}, context = '') {\n\t\tlet result = this.compiledExpression.eval(data, metaData, context);\n\t\treturn result;\n\t}\n\n\tstatic isFormulaValue(expression) {\n\t\treturn Formula.isFormula(expression) || ConcatenatedText.isConcatenatedText(expression);\n\t}\n\n}\n"],"sourceRoot":""}